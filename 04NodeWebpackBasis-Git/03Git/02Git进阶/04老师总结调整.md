## 一. 问题的处理

### 1.1. 设置上游分支(跟踪分支)

```shell
git fetch  # 拉取远程内容
git branch --set-upstream-to=origin/main  # 将当前分支与上游分支建立联系
# master和origin/master或者和origin/main建立联系
```



### 1.2. 合并没有共同base的分支

```shell
git merge --allow-unrelated-histories  # 合并不相干的历史
# 这个主要是本地有提交历史, 远程也有提交历史, 这两个历史是不相干的, 所以需要合并
# 如果你在本地从来没有提交过commit对象, 其实是可以不加后面的东西
```

```shell
# 如果不加就是另外一种操作了
# 不使用git fetch
# 而是直接git pull origin main
# 无论本地有没有提交历史, 都不需要合并不相干的历史(好像不是这样的, 还没有测试, 随机应变吧)
# 将远程main分支的东西拉取到本地的master分支上
# 然后再把master和origin/master或者和origin/main建立联系, 下次可以直接git pull
```



### 1.3. Github的使用

#### 1.3.1. GitHub的作用



#### 1.3.2. GitHub查找和下载开源项目



#### 1.3.3. GitHub创建远程仓库

```shell
# 初始化本地仓库
git init

# 添加远程仓库
git remote add origin xxxx


# 从远程仓库获取内容
git fetch
git branch --set-upstream-to=origin/main
git merge --allow-unrelated-histories

# git push
git config push.default upstream

# 换一种做法
git checkout main  # 直接根据远程的origin/main创建一个本地main分支并切换到此main分支
```



### 1.4. Gitlab的使用







## 二. git tag

```shell
git tag v1.0.0  # 打上tag

git tag  # 查看所有tag

git tag -d v1.0.0  # 删除tag

# 将本地tag push到远程仓库
git push origin v1.0.0  # 将此tag推送到远程仓库
git push origin --tags  # 将所有tag推送到远程仓库

# 删除远程的tag
git push origin -d v1.0.0  # 删除远程tag
```





## 三. git的原理(git如何保存内容)

```shell
git add .
# .git/objects/00 40

git commit -m "aaa"
# .git/object/eb -> 提交信息/作者/tree
# .git/object/aa
# aaa.js -> 00
# bbb.js -> 40
```







## 四. 分支结构

### 4.1. 本地分支的使用

创建分支

```shell
git branch testing  # 创建testing分支
git checkout testing  # 切换到testing分支
# 合并写法
git checkout -b testing  # 创建并切换到testing分支
```



合并分支

```shell
git merge testing  # 在当前分支合并testing分支
git add .
git commit -m ""  # 合并之后提交
```



查看所有的分支

```shell
git branch  # 查看所有本地分支
git branch -a  # 查看所有本地分支包括到达本地的远程分支

# 删除本地分支
git branch -d testing
```



### 4.2. 远程分支的操作

```shell
# 初始化本地仓库
git init

# 添加远程仓库
git remote add origin xxxx


# 从远程仓库获取内容
git fetch
git branch --set-upstream-to=origin/main
git merge --allow-unrelated-histories

# git push
git config push.default upstream

# 换一种做法
git checkout main
```



推送一个远程分支:

```shell
git push origin develop  # 将提交内容推送到远程的develop分支上

# 李四操作
git checkout develop
```



删除远程分支

```shell
git push origin -d develop
```



### 4.3. git flow工作流

第一图:

* master: 记录主要的版本
* develop: 开发版本
* topic: 新主题



第二图:

* master: 记录主要的版本
  * tag
* hotfix: 热修复
  * merge master
  * merge develop
* develop: 开发分支
* release: 上线的分支
  * merge master
  * merge develop
* feature: 新特性





### 4.4. git rebase

* 改变某一个分支base, 目的让log的历史记录更加的简洁
* 黄金原则: 不要在主分支中使用rebase





## 五. Git中常见的命令总结

基础的命令: (必须掌握)

```shell
git clone xxxxxxxx

git add .
git commit -m "xxxx"

git pull ->(git fetch + git merge)
git push
```



进阶的命令:

* main
* develop
* feature

```shell
git checkout --track origin/develop
git checkout -b develop origin/develop
# 1.检查服务器是否有origin/develop这个分支
# 2.创建一个本地的develop分支
# 3.让本地的develop分支自动跟踪origin/develop
# 4.切换到develop分支

git add .
git commit -m ""
git pull
git push
```



高级的命令:

```shell
git tag  # 打上标签

git checkout -b develop  # 创建develop分支, 并切换到此分支
git add .
git commit -m'提交信息'  # 这两个应该可以不做, 随机应变
git push origin develop  # 提交到远程的develop分支上
# 如果远程没有develop分支就在远程仓库上创建一个develop分支

git merge develop  # 假如在master分支做这个操作, 就是把develop合并到master分支上
git rebase
```





