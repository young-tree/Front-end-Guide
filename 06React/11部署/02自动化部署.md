### 1.来到8080端口创建管理员用户

- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925140912750.png" alt="image-20220925140912750" style="zoom:50%;" />

### 2.新建Item

- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141048546.png" alt="image-20220925141048546" style="zoom:67%;" />

- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141109896.png" alt="image-20220925141109896" style="zoom:67%;" />

- 在服务器安装git：dnf install git

### 3.添加凭证

- 如果你的仓库是一个私有的仓库就得添加凭证

- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141431075.png" alt="image-20220925141431075" style="zoom:67%;" />

- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141449791.png" alt="image-20220925141449791" style="zoom:67%;" />

- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141615727.png" alt="image-20220925141615727" style="zoom:67%;" />

- ![image-20220925141634942](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141634942.png)

- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141729137.png" alt="image-20220925141729137" style="zoom:67%;" />
- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141755546.png" alt="image-20220925141755546" style="zoom:67%;" />
- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141811061.png" alt="image-20220925141811061" style="zoom:67%;" />
- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141841627.png" alt="image-20220925141841627" style="zoom:67%;" />

- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925141903236.png" alt="image-20220925141903236" style="zoom:67%;" />
- <img src="C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925142056247.png" alt="image-20220925142056247" style="zoom:67%;" />

### 4.安装Node

- ![image-20220925142233573](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925142233573.png)

  - 这里面没有node

- ![image-20220925142313780](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925142313780.png)

- ![image-20220925142339181](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925142339181.png)
  
- ![image-20220925142353749](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925142353749.png)
  
- 安装完毕重启jenkins

- 再来到全局工具配置中就有node了

  ![image-20220925142534524](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925142534524.png)

  ![image-20220925142555066](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925142555066.png)

  - 保存后自动安装相应的Node版本

- 再来到当前项目的配置中就有node了

  ![image-20220925142707159](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925142707159.png)

### 5.执行shell操作

```shell
pwd
node -v
npm -v

npm install 
npm run build

pwd

echo '构建成功'

ls

# 删除/root/项目文件夹里所有的内容
rm -rf /root/项目名/* 

cp -rf ./build/* /root/项目名/
```

- 注意项目名
- 注意build有可能是dist

![image-20220925143009605](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925143009605.png)

- 立即构建

  ![image-20220925143032603](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925143032603.png)

### 6.问题解决

- 方案一：修改文件权限：/etc/sysconfig/jenkins

  ![01](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5C01.jpg)

- 方案二：sudo usermod -a -G root jenkins

  - 这个成功了

- 方案三：sudo chown -R jenkins /root/项目名

  - 前面加一个sudo意思是使用管理员的权限去操作
  - 这个没有成功

- 任选其一进行解决，最后重启jenkins

  - systemctl restart jenkins

![image-20220925143650012](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925143650012.png)

![image-20220925143702772](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925143702772.png)

![image-20220925143739266](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925143739266.png)

- sudo usermod -a -G root jenkins

  - 最终使用方案二成功了

  ![image-20220925144104159](C:%5CUsers%5C%E6%9E%97%5CDesktop%5C%E7%AC%94%E8%AE%B0%5C08React%5C11%E9%83%A8%E7%BD%B2%5Cimages%5Cimage-20220925144104159.png)



