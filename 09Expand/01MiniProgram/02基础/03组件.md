### 1.自定义组件

- 页面

  ```html
  <self-cpn title="你好啊" info="{{123}}" content="哈哈哈"></self-cpn>
  <self-cpn bind:cccc="bbbb" eee="eee"></self-cpn>
  ```

  ```css
  .eee { color: red }
  ```

  ```js
  bbbb(event) { console.log(event.detail, 134) }
  ```

  ```json
  {"usingComponents": { "self-cpn": "/components/01self-cpn/self-cpn" }}
  ```

- 组件

  ```html
  <view>{{ title }}</view>
  <view>{{ info }}</view>
  <view>{{ content }}</view>
  
  <button bindtap="emitEvent">发射事件</button>
  
  <view class="eee">传递类</view>
  ```

  ```js
  Component({
    properties: {
      title: {
        type: String,
        value: "默认标题"
      },
      info: {
        type: Number,
        value: 0
      },
      content: {
        type: String,
        value: "默认内容"
      }
    },
    externalClasses: ["eee"],
    data: { abc: "ccc" },
    methods: { emitEvent() { this.triggerEvent("cccc", this.data.abc) }}
  })
  ```

### 2.共享样式

- 页面

  ```html
  <style-share></style-share>
  ```

  ```css
  .ddd { background-color: aqua }
  ```

  ```json
  {"usingComponents": { "style-share": "/components/02style-share/style-share" }}
  ```

- 组件

  ```js
  Component({ options: { styleIsolation: "shared" } })
  ```

  ```html
  <view class="ddd">组件标题</view>
  ```

### 3.tabControl

- 页面

  ```html
  <tab-control class="tab-control" titles="{{titles}}" bind:emitIndex="emitIndex">
  </tab-control>
  <view class="content">{{ content[currentIndex] }}</view>
  
  <button bindtap="callTbaControl">调用tab-control组件中的方法</button>
  ```

  ```js
  Page({
    data: {
      titles: ["手机", "电脑", "平板"],
      currentIndex: 0,
      content: ["手机好呀", "电脑好呀", "平板好呀"]
    },
    emitIndex(event) { this.setData({currentIndex: event.detail}) },
    callTbaControl() { this.selectComponent(".tab-control").text(2) }
  })
  ```

  ```json
  {"usingComponents": { "tab-control": "/components/03tab-control/tab-control" }}
  ```

- 组件

  ```html
  <view class="items">
    <block wx:for="{{titles}}" wx:key="*this">
      <view
        class="item {{ currentIndex === index ? 'active': '' }}"
        data-index="{{index}}"
        bindtap="changeIndex"
      >
        {{item}}
      </view>
    </block>
  </view>
  ```

  ```js
  Component({
    properties: {
      titles: {
        type: Array,
        value: []
      }
    },
    data: { currentIndex: 0 },
    methods: {
      changeIndex(event) {
        const currentIndex = event.currentTarget.dataset.index
        this.setData({ currentIndex })
        this.triggerEvent("emitIndex", this.data.currentIndex);
      },
      text(text) { console.log(text); }
    }
  })
  ```

  ```css
  .items {
    display: flex;
    justify-content: space-around;
  }
  
  .item {
    color: #ff9854;
    padding-bottom: 4rpx;
  }
  
  .item.active { border-bottom: 4rpx solid #f00 }
  ```

  



