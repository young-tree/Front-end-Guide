### 1.动态路由

```js
// 在router.js中配置路由映射关系
{path: "/about/:id", name: "About", component: About}
```

```html
<!-- 在APP.vue中进行跳转 -->
<router-link to="/about/123">About</router-link>
```

```html
<!-- About.vue组件 -->
<div>{{ $route.params.id }}</div>

<script setup>
import { useRoute } from "vue-router"
const route = useRoute()
console.log(route.params.id)
</script>
```

### 2.NotFound页面

```js
{path: "/:pathMatch(.*)", name: "NotFound", component: NotFound}
```

- 在route中的params.pathMatch属性中拿到值

```js
{path: "/:pathMatch(.*)*", name: "NotFound", component: NotFound}
```

- 解析`/`，将`/`作为分割点解析成数组：<img src="images/image-20220720092626249.png" alt="image-20220720092626249" style="zoom: 33%;" />

### 3.嵌套路由

```js
{
  path: "/",
  name: "Home",
  component: Home,
  children: [
    {
      path: "",
      name: "HomeBanners",
      component: HomeBnners
    },
    {
      path: "list",
      name: "HomeList",
      component: HomeLiset
    }
  ]
}
```

- 在Home组件中写相应的router-link和router-view

### 4.编程式导航

```js
import { useRouter } from "vue-router"

const { push, replace, go} = useRouter()
const toHomeBanners = () => push("/")
const toHomeBanners = () => push({name: "HomeBanners"})
const toHomeList = () => push("/list")
const toHomeList = () => push({name: "HomeList"})
const toHomeList = () => push({name: "HomeList", replace: true})
const toHomeList = () => replace({name: "HomeList"})
const toHomeList = () => go(3)
const toHomeList = () => back()
const toHomeList = () => forward()
```

- 传递参数

  ```js
  import { useRouter } from "vue-router"
  const { push, replace, go } = useRouter()
  const toHomeBanners = () => push({
    path: "/",
    query: { name: "yt", age: 22 }
  })
  ```

  ```html
  <!-- 在某个组件触发了toHomeBanners这个函数后就会来到这个组件中 -->
  <h2>name: {{ $route.query.name }}, age: {{ $route.query.age }}</h2>
  ```

### 5.动态添加路由

- 动态添加一个主路由

  ```js
  const adminRoute = {
    path: "/admin",
    name: "Admin",
    component: () => import("../src/components/Admin.vue")
  }
  
  const admin = false
  if (admin) router.addRoute(adminRoute)
  ```

- 动态添加一个子路由

  ```js
  const homeRankingRoute = {
    path: "ranking",
    name: "HomeRanking",
    component: () => import("../src/components/HomeCpns/HomeRanking.vue")
  }
  
  const homeRanking = true
  if (homeRanking) router.addRoute("Home", homeRankingRoute)
  ```

- 删除路由

  ```js
  // 方式一
  router.addRoute({
    path: "/notfound",
    name: "HomeRanking",
    component: NotFound
  })
  
  // 方式二
  router.addRoute("Home", homeRankingRoute)
  router.removeRoute("HomeRanking")
  
  // 方式三
  let removeRoute = null
  if (homeRanking) {
    removeRoute = router.addRoute("Home", homeRankingRoute)
  }
  removeRoute?.()
  ```

- 路由的其他方法补充

  - router.hasRoute()：检查路由是否存在
  - router.getRoutes()：获取一个包含所有路由记录的数组

### 6.路由守卫

```js
const router = createRouter({
  history: createWebHistory(),
  routes
})

router.beforeEach(to => {
  const path = to.path
  const token = localStorage.getItem("token")

  if(path !== "/login" && !token) {
    return "/login"
  } else if (path == "/login" && token) {
    return "/"
  }
})
```

